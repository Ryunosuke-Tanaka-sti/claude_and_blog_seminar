# フロントエンド実装ルール（Astro + React）

## 開発方針：AIフルデザイン駆動
🎨 **このプロジェクトではUI/UXデザインをAIに完全に委ねます**

### 従来の問題点
- UIを文章で説明すると分量が膨大になる
- 実際に画面を見て「何か違うな」という微調整が無限ループする
- 仕様と頭の中のイメージのギャップが埋まらない

### 新しいアプローチ
**人間が注目すべきこと：**
- ✅ 表示される**情報の正確性**（データが正しいか）
- ✅ 表示される**情報の網羅性**（必要な情報が漏れていないか）
- ✅ 情報の**順序と優先度**（重要な情報が目立つか）

**AIに任せること：**
- 🤖 視覚的デザイン（色、フォント、レイアウト）
- 🤖 アニメーション・インタラクション
- 🤖 レスポンシブ対応
- 🤖 アクセシビリティ配慮

## 適用範囲
仕様書ベース開発が有効な範囲：
- ✅ **情報設計**（何を表示するか）
- ✅ データ処理ロジック（API呼び出し、データ変換など）
- ✅ 状態管理の実装
- ✅ バリデーションロジック
- ✅ ユーティリティ関数

## アーキテクチャ
- **Astro** をベースとした静的サイト生成（SSG）
- **React** コンポーネントをインタラクティブな部分に使用
- Atomic Design を意識した構成
- ロジックと表示の分離

## 技術スタック
- **フレームワーク**: Astro 4.x
- **UIライブラリ**: React 18.x
- **スタイリング**: Astroの標準CSS（スコープ付き）
- **TypeScript**: 5.x

## ディレクトリ構成
```
application/frontend/
├── src/
│   ├── components/     # Reactコンポーネント
│   │   ├── atoms/      # 最小単位のコンポーネント
│   │   ├── molecules/  # 複数のatomsを組み合わせ
│   │   ├── organisms/  # 複雑な機能単位
│   │   └── templates/  # ページレイアウト
│   ├── pages/          # Astroページコンポーネント（ルーティング）
│   ├── layouts/        # ページレイアウト
│   ├── hooks/          # カスタムフック
│   ├── services/       # API呼び出しロジック
│   ├── stores/         # 状態管理
│   ├── types/          # 型定義
│   └── utils/          # ユーティリティ関数
└── public/            # 静的アセット
```

## コード規約
- ESLint/Prettier の設定に従う
- React Hooks のルールを遵守
- コンポーネントは単一責任の原則を守る
- propsの型定義を明確にする
- 1コンポーネントあたり150行を目安に分割を検討

## 禁止事項
- ❌ コンポーネント内に複雑なビジネスロジックを書かない
- ❌ propsのバケツリレーを避ける（Context/Stateを活用）
- ❌ useEffectの依存配列を省略しない
- ❌ インラインスタイルの乱用を避ける

## パフォーマンス
- 不要な再レンダリングを避ける（React.memo, useMemo, useCallback）
- 大きなリストには仮想化を検討
- 遅延ローディングを活用

## アクセシビリティ
- セマンティックなHTMLを使用
- キーボード操作をサポート
- ARIA属性を適切に使用

## 実装前の確認事項
- `docs/features/`または`docs/bugs/`の仕様書を必ず読み込む
- UI/UXデザインが複雑な場合はペアコーディング手法を検討
- ロジック部分のみを仕様書ベースで実装

## 使用方法

1. このファイルを`application/frontend/CLAUDE.md`としてコピー
2. `docs/features/`から仕様書を選択
3. Claude Codeに仕様書を読み込ませて実装を依頼：
   ```
   以下の仕様書を読み込んで実装してください：
   @docs/features/frontend-feature-001.md

   実装方針：
   - 表示する情報の正確性・網羅性を最優先
   - UI/UXデザインはあなたの判断で最適なものを選択
   - モダンで見やすいデザインを心がけてください
   ```
4. 実装完了後にビルドを実行：
   ```bash
   npm run build:frontend
   ```
5. **人間のレビューポイント**：
   - ✅ 表示されている情報は正しいか？
   - ✅ 必要な情報が全て表示されているか？
   - ✅ 情報の優先度は適切か？
   - 🤖 デザインの好みは気にしない（AIに任せる）

## 仕様書の書き方（情報設計重視）

### 良い仕様書の例
```markdown
## 表示する情報
- ブログ記事のタイトル（必須・最重要）
- 記事のサムネイル画像（必須）
- 公開日時（必須）
- カテゴリタグ（必須）
- 記事の概要（150文字程度、任意）
- 著者名（任意）

## 情報の優先度
1. タイトルを最も目立たせる
2. サムネイル画像を次に目立たせる
3. その他のメタ情報は控えめに表示

## インタラクション
- 記事カードをクリックすると詳細ページへ遷移
- カテゴリタグをクリックするとカテゴリ別一覧へ遷移
```

### 避けるべき仕様書
```markdown
❌ タイトルは32pxのフォントサイズで、色は#333333、
   フォントはNoto Sans JPを使用...
   （デザイン詳細は書かない）

❌ カードのレイアウトは縦に配置して、
   画像は上、タイトルは中央、メタ情報は下...
   （レイアウト指定は書かない）
```

## AIデザイン駆動のメリット

1. **開発速度の向上**
   - デザインの微調整で時間を浪費しない
   - 情報設計に集中できる

2. **一貫性のあるデザイン**
   - AIが全体のバランスを考慮
   - 人間の主観的な「好み」を排除

3. **アクセシビリティ**
   - AIが自動的にWCAG準拠を考慮
   - セマンティックHTMLの使用

## トラブルシューティング

**問題: 表示される情報が不足している**
- 対処: 仕様書の「表示する情報」セクションを見直す
- 仕様書に記載がない情報は実装されない

**問題: 情報の優先度が期待と違う**
- 対処: 仕様書の「情報の優先度」セクションを明確にする
- 「最重要」「重要」「補足」などのラベルを使用

**問題: デザインが気に入らない**
- 対処: 情報が正しく表示されていれば**問題なし**
- デザインの好みは主観なのでAIに任せる
- どうしても変更したい場合は新しいプロンプトで依頼
