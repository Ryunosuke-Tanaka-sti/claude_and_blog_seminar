# バグ修正仕様書：[バグの概要]

## バグ情報

### バグID
[バグ管理システムのID（該当する場合）]

### 発見日
[YYYY-MM-DD]

### 報告者
[報告者名または部署]

### 優先度
- [ ] 🔴 Critical（本番環境に影響）
- [ ] 🟠 High（主要機能に影響）
- [ ] 🟡 Medium（一部機能に影響）
- [ ] 🟢 Low（軽微な影響）

## 現象

### 再現手順
1. [ステップ1]
2. [ステップ2]
3. [ステップ3]

### 実際の動作
[現在どのような動作をしているか]

### 期待される動作
[本来どのような動作をすべきか]

### スクリーンショット/ログ（該当する場合）
```
[エラーログやスクリーンショットの説明]
```

## 影響範囲

### 影響を受ける機能
- [機能A]
- [機能B]

### 影響を受けるユーザー
- [全ユーザー / 特定の条件下のユーザー]

### データへの影響
- [データの不整合が発生するか]
- [既存データの修正が必要か]

## 原因分析

### 根本原因
[バグの技術的な原因を特定]

### 発生箇所
```
ファイル: src/xxx/yyy.ts
関数: functionName()
行番号: 123-145
```

### 原因となったコード（該当する場合）
```typescript
// 問題のあるコード例
function problematicFunction() {
  // ...
}
```

### なぜこのバグが発生したか
- [原因1: 例: バリデーション不足]
- [原因2: 例: エッジケースの未考慮]
- [原因3: 例: 型定義の不備]

## 修正方針

### 修正アプローチ
[どのようにバグを修正するか、基本的な方針]

### 修正内容
1. [修正1: 具体的な変更内容]
2. [修正2: 具体的な変更内容]
3. [修正3: 具体的な変更内容]

### 修正後のコード（イメージ）
```typescript
// 修正後のコード例
function fixedFunction() {
  // ...
}
```

### 副作用の確認
- [この修正が他の機能に影響を与えないか]
- [既存のテストケースへの影響]

## データ修正（該当する場合）

### 不整合データの修正方法
```sql
-- データ修正クエリの例
UPDATE table_name SET ...
```

### バックアップ方針
[修正前のデータバックアップ方法]

## テスト計画

### 修正の検証方法
1. [検証ステップ1]
2. [検証ステップ2]
3. [検証ステップ3]

### テストケース
- [ ] 正常系: [期待される動作を確認]
- [ ] 異常系: [エラーハンドリングを確認]
- [ ] エッジケース: [境界値を確認]

### 回帰テスト
- [影響範囲の機能をテスト]
- [関連する機能の動作確認]

## リリース計画

### リリース方法
- [ ] 通常リリース
- [ ] ホットフィックス
- [ ] 段階的ロールアウト

### リリース前の確認事項
- [ ] コードレビュー完了
- [ ] テスト完了
- [ ] ドキュメント更新
- [ ] ステークホルダーへの通知

### ロールバック計画
[問題が発生した場合の戻し方]

## 再発防止策

### 同様のバグを防ぐための対策
- [対策1: 例: バリデーション強化]
- [対策2: 例: テストケース追加]
- [対策3: 例: レビュー観点の追加]

### ドキュメント更新
- [更新すべきドキュメント]
- [追加すべき注意事項]

## 実装時の注意点

### 優先度
- 🔴 必須: [絶対に修正が必要な部分]
- 🟡 推奨: [可能であれば改善したい部分]

### 実装順序
1. [最初に修正すべき部分]
2. [次に修正すべき部分]

### 影響範囲の確認
- [修正によって影響を受ける可能性がある箇所]

## 参考資料
- [関連するIssue]
- [参考にしたドキュメント]
- [類似バグの修正例]

## 備考
[その他、修正時に知っておくべき情報]
